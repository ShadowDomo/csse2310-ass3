#include "2310A.h"


/** Player A program. **/
int main(int argc, char **argv) {

//    int fd[2];
//    pipe(fd);
//
//    int cPID = fork();
//
//    if (cPID == 0) {
//
//    }
    // suppose correct
    int numPlayers;
    int playerID;
    sscanf(argv[1], "%d", &numPlayers);
    sscanf(argv[2], "%d", &playerID);

    printf("^");

    fflush(stdout);
//    printf("kuntutnutnnt\n");

//    char *givenpath = read_line(fopen("../test.path","r"));
    char *givenPath = read_line(stdin);
//    char *givenPath = "7;::-Mo1V11V22Mo1Mo1::-";
    Path *path = allocate_path(givenPath, numPlayers);
    path->players = malloc(sizeof(Player*) * numPlayers );

    for (int i = 0; i < numPlayers; ++i) {
        path->players[i] = init_player(path, i);
    }
    arrange_order_of_players(path);

    start_player(numPlayers, playerID, path, 'A');
//    int fd[2];
//    pipe(fd);


//    int a = fork();
//    if (a ==0) {
//        printf("im child with id: %d", a);
//    } else {
//        printf("im parent with id %d", a);
//    }

}

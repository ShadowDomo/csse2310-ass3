#include "path.h"

/** Allocates the path from the given file **/
void alloc_path(Path *path, FILE *file, char **argv) {
    char *line = read_line(file);

    // get number of stops
    int numberOfStops = line[0] - '0';
    path->size = numberOfStops;

    // make a list of sites with length of the number of stops
    Site *sites = malloc(sizeof(Site) * path->size);

    for (int i = 0; i < numberOfStops; ++i) {
        // break up into each site
        char string[4];
        snprintf(string, 4, "%s", &line[2 + 3 * i]);

        // get site type and its value
        char type[3];
        snprintf(type, 3, "%s", string);
        sites[i].type = strdup(type);

        if (strcmp(sites[i].type, "::") == 0) {
            sites[i].playerLimit = -1;
        } else {
            sites[i].playerLimit = string[2] - '0';
        }
//        printf("site %d has type: %s with limit: %d\n", i, sites[i].type, sites[i].playerLimit);
    }
    path->sites = sites;
}


/** Displays the path to stdout **/
void print_path(Path *path) {
    // testadawdawdaw
    for (int site = 0; site < path->size; ++site) {
        printf("%s ", path->sites[site].type);
    }
}


